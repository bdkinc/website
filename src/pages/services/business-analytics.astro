---
import { getCollection, getEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation';
import { getNavigationData } from '@/lib/navigation-data';
import { iconMap } from '@/lib/icons';
import { ServiceCard, ServiceCardGrid } from '@/components/ServiceCard';
import ImpactMetricsSection from '@/components/ImpactMetricsSection.astro';
import {
  TrendingUp,
  Clock,
  Target,
  Zap,
  CheckCircle2,
  Database,
  Users,
} from 'lucide-react';

const service = await getEntry('services', 'business-analytics');
if (!service) {
  return new Response(null, { status: 404 });
}
const { servicesData, recentPosts } = await getNavigationData();
const IconComponent = iconMap[service.data.icon];
const title = service.data.title;
const titleWords = title.split(' ');
const lastTitleWord = titleWords.pop();
const titleFirst = titleWords.join(' ');

const metrics = [
  { value: '300+', label: 'DASHBOARDS BUILT', icon: TrendingUp },
  { value: '80%', label: 'REPORT TIME SAVED', icon: Clock },
  { value: '200+', label: 'DATA SOURCES LINKED', icon: Database },
  { value: '99.9%', label: 'DATA ACCURACY', icon: Target },
];

const detailColumns = [
  {
    title: 'Data Integration',
    icon: Database,
    items: [
      'Unified pipelines combine ERP, CRM, finance, and operational data',
      'Automated validation keeps analytics accurate and audit-ready',
      'Scheduled refreshes deliver the latest numbers to every dashboard',
    ],
  },
  {
    title: 'Reporting Capabilities',
    icon: TrendingUp,
    items: [
      'Role-based dashboards deliver tailored KPIs for each team',
      'Scenario modeling highlights opportunities and risks in minutes',
      'Automated alerts flag anomalies before they impact performance',
    ],
  },
];

const relatedPosts = (await getCollection('blog', ({ data }) => !data.draft))
  .filter((post) => post.data.tags?.some((tag) => ['business', 'productivity', 'analytics'].includes(tag)))
  .slice(0, 3);
---

<Layout
  title={`${service.data.title} - BDK Inc`}
  description={service.data.description}
>
  <Navigation
    client:load
    services={servicesData}
    blogPosts={recentPosts}
    currentPath={Astro.url.pathname}
  />
  <main id="main-content">
    <!-- Hero Section -->
    <section class="relative overflow-hidden px-4 pt-24 pb-12 sm:px-6 lg:px-8">
      <div class="gradient-mesh absolute inset-0 opacity-30"></div>
      <div class="circuit-overlay absolute inset-0 opacity-40"></div>
      <div class="relative z-10 mx-auto max-w-7xl text-center">
        <div
          class="from-primary/10 to-secondary/10 mb-6 inline-flex items-center justify-center rounded-2xl bg-linear-to-br p-4 delay-100 duration-500"
          transition:name={`service-icon-${service.id}`}
        >
          <IconComponent className="text-primary h-12 w-12" aria-hidden="true" />
        </div>
        <h1
          class="mb-6 text-5xl font-bold md:text-6xl"
          transition:name={`service-title-${service.id}`}
          transition:animate="initial"
        >
          <span class="text-foreground"
            >{titleFirst ? `${titleFirst} ` : ''}</span
          >
          <span
            class="from-primary to-secondary bg-linear-to-br bg-clip-text text-transparent"
            >{lastTitleWord}</span
          >
        </h1>
        <p
          transition:name={`service-description-${service.id}`}
          transition:animate="initial"
          class="text-muted-foreground mx-auto max-w-3xl text-xl"
        >
          {service.data.description}
        </p>
      </div>
      <div
        class="from-brand-primary to-brand-secondary absolute right-0 bottom-0 left-0 h-2 bg-linear-to-br"
      >
      </div>
    </section>

    <!-- Content Section -->
    <section class="px-4 py-24 sm:px-6 lg:px-8">
      <div
        class="animate-in fade-in slide-in-from-bottom-4 fill-mode-both space-y-12 delay-600 duration-700"
      >
        <div class="mx-auto max-w-7xl">
          <div class="service-content-wrapper">
            <div class="not-prose mx-auto max-w-4xl">
              <h2 class="text-foreground mb-6 text-center text-3xl font-bold">
                Transform Data into Decisions
              </h2>
              <div
                class="text-muted-foreground mb-10 text-center text-lg leading-relaxed"
              >
                Turn your data into actionable insights with custom reporting
                and real-time analytics. Make data-driven decisions with
                confidence using our automated reporting solutions that deliver
                the information you need, when you need it.
              </div>
            </div>

            <h3 class="text-foreground mb-6 text-center text-2xl font-bold">
              Stop Drowning in Data
            </h3>

            <ServiceCardGrid>
              <ServiceCard>
                <div class="mb-6">
                  <Clock className="text-primary h-16 w-16" aria-hidden="true" />
                </div>
                <h4 class="text-foreground mb-4 text-2xl font-bold">
                  Replace Manual Reporting
                </h4>
                <div class="text-muted-foreground leading-relaxed">
                  Stop spending hours creating reports in spreadsheets. Our
                  automated analytics solutions pull data from your systems and
                  generate reports automatically—daily, weekly, or in real-time.
                </div>
              </ServiceCard>

              <ServiceCard>
                <div class="mb-6">
                  <Zap className="text-primary h-16 w-16" aria-hidden="true" />
                </div>
                <h4 class="text-foreground mb-4 text-2xl font-bold">
                  Real-Time Visibility
                </h4>
                <div class="text-muted-foreground leading-relaxed">
                  Don't make decisions based on yesterday's data. Our analytics
                  platforms provide real-time visibility into your operations
                  with up-to-the-minute information.
                </div>
              </ServiceCard>

              <ServiceCard>
                <div class="mb-6">
                  <Target className="text-primary h-16 w-16" aria-hidden="true" />
                </div>
                <h4 class="text-foreground mb-4 text-2xl font-bold">
                  Custom Dashboards
                </h4>
                <div class="text-muted-foreground leading-relaxed">
                  We create custom dashboards tailored to your specific needs,
                  displaying the KPIs and metrics that matter most to your
                  operation. See your entire business at a glance.
                </div>
              </ServiceCard>
            </ServiceCardGrid>

            <h3
              class="text-foreground mt-12 mb-6 text-center text-2xl font-bold"
            >
              Key Benefits
            </h3>

            <div class="not-prose mb-20 grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                <div class="border border-border/60 bg-background/90 rounded-2xl flex flex-col items-center p-6 text-center">
                  <div class="mb-4">
                    <Clock className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Save Time
                  </h4>
                  <div class="text-muted-foreground">
                    Eliminate hours of manual report creation
                  </div>
                </div>

                <div class="border border-border/60 bg-background/90 rounded-2xl flex flex-col items-center p-6 text-center">
                  <div class="mb-4">
                    <CheckCircle2 className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Improve Accuracy
                  </h4>
                  <div class="text-muted-foreground">
                    Automated data collection reduces errors
                  </div>
                </div>

                <div class="border border-border/60 bg-background/90 rounded-2xl flex flex-col items-center p-6 text-center">
                  <div class="mb-4">
                    <Target className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Better Decisions
                  </h4>
                  <div class="text-muted-foreground">
                    Access to real-time information supports informed choices
                  </div>
                </div>

                <div class="border border-border/60 bg-background/90 rounded-2xl flex flex-col items-center p-6 text-center">
                  <div class="mb-4">
                    <TrendingUp className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Identify Trends
                  </h4>
                  <div class="text-muted-foreground">
                    Spot patterns and opportunities in your data
                  </div>
                </div>

                <div class="border border-border/60 bg-background/90 rounded-2xl flex flex-col items-center p-6 text-center">
                  <div class="mb-4">
                    <Users className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Increase Accountability
                  </h4>
                  <div class="text-muted-foreground">
                    Clear metrics help track performance
                  </div>
                </div>

                <div class="border border-border/60 bg-background/90 rounded-2xl flex flex-col items-center p-6 text-center">
                  <div class="mb-4">
                    <Database className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Integration
                  </h4>
                  <div class="text-muted-foreground">
                    Connect data from multiple systems into unified reports
                  </div>
                </div>
              </div>

            <div class="not-prose mb-20 grid gap-8 md:grid-cols-2">
              {detailColumns.map((column) => (
                <div class="glass border-border rounded-2xl border p-8">
                  <div class="mb-6 flex items-center gap-3">
                    <column.icon className="text-primary h-8 w-8" aria-hidden="true" />
                    <h4 class="text-foreground text-2xl font-bold">
                      {column.title}
                    </h4>
                  </div>
                  <div class="text-muted-foreground space-y-3">
                    {column.items.map((item) => (
                      <div class="flex items-start gap-2">
                        <CheckCircle2
                          className="text-primary mt-1 h-5 w-5 shrink-0"
                          aria-hidden="true"
                        />
                        <span>{item}</span>
                      </div>
                    ))}
                  </div>
                </div>
              ))}
            </div>

            <div class="bg-background border-border">
              <div
                class="gradient-mesh not-prose mb-20 rounded-2xl border p-10"
              >
                <h3 class="text-foreground mb-6 text-center text-2xl font-bold">
                  Our Process
                </h3>
                <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
                  <div class="text-center">
                    <div
                      class="bg-primary/20 text-primary mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full text-xl font-bold"
                      aria-hidden="true"
                    >
                      1
                    </div>
                    <h5 class="text-foreground mb-2 text-lg font-bold">
                      Understand Your Needs
                    </h5>
                    <div class="text-muted-foreground text-sm">
                      We start by learning about your business and the decisions
                      you need to make
                    </div>
                  </div>
                  <div class="text-center">
                    <div
                      class="bg-primary/20 text-primary mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full text-xl font-bold"
                      aria-hidden="true"
                    >
                      2
                    </div>
                    <h5 class="text-foreground mb-2 text-lg font-bold">
                      Identify Data Sources
                    </h5>
                    <div class="text-muted-foreground text-sm">
                      We locate the data you need across your systems
                    </div>
                  </div>
                  <div class="text-center">
                    <div
                      class="bg-primary/20 text-primary mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full text-xl font-bold"
                      aria-hidden="true"
                    >
                      3
                    </div>
                    <h5 class="text-foreground mb-2 text-lg font-bold">
                      Design Reports
                    </h5>
                    <div class="text-muted-foreground text-sm">
                      We create custom reports and dashboards tailored to your
                      requirements
                    </div>
                  </div>
                  <div class="text-center">
                    <div
                      class="bg-primary/20 text-primary mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full text-xl font-bold"
                      aria-hidden="true"
                    >
                      4
                    </div>
                    <h5 class="text-foreground mb-2 text-lg font-bold">
                      Automate Collection
                    </h5>
                    <div class="text-muted-foreground text-sm">
                      We set up automated data gathering and processing
                    </div>
                  </div>
                  <div class="text-center">
                    <div
                      class="bg-primary/20 text-primary mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full text-xl font-bold"
                      aria-hidden="true"
                    >
                      5
                    </div>
                    <h5 class="text-foreground mb-2 text-lg font-bold">
                      Deploy & Train
                    </h5>
                    <div class="text-muted-foreground text-sm">
                      We implement the solution and train your team to use it
                    </div>
                  </div>
                  <div class="text-center">
                    <div
                      class="bg-primary/20 text-primary mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full text-xl font-bold"
                      aria-hidden="true"
                    >
                      6
                    </div>
                    <h5 class="text-foreground mb-2 text-lg font-bold">
                      Optimize
                    </h5>
                    <div class="text-muted-foreground text-sm">
                      We continuously refine reports based on your feedback
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <h3 class="text-foreground mb-6 text-center text-2xl font-bold">
              Why Choose BDK for Analytics?
            </h3>

            <div class="text-center">
              <div
                class="text-muted-foreground mx-auto mb-6 max-w-4xl text-lg leading-relaxed"
              >
                We combine technical expertise with business understanding. Our
                team doesn't just build reports—we help you identify the metrics
                that matter and design analytics that drive better decisions. We
                work with your existing systems and data, creating solutions
                that integrate seamlessly into your operations.
              </div>
              <div class="text-primary text-xl font-semibold">
                Transform your data from a burden into a competitive advantage.
              </div>
            </div>
          </div>
        </div>

        {relatedPosts.length > 0 && (
          <section class="mx-auto max-w-5xl">
            <h2 class="text-foreground mb-6 text-center text-3xl font-bold">
              Related Resources
            </h2>
            <div class="grid gap-6 md:grid-cols-3">
              {relatedPosts.map((post) => (
                <a
                  href={`/blog/${post.slug}`}
                  class="border-border hover:border-primary flex flex-col rounded-xl border p-6 transition-colors"
                >
                  <h3 class="text-foreground mb-2 text-lg font-semibold">
                    {post.data.title}
                  </h3>
                  <p class="text-muted-foreground text-sm">
                    {post.data.description}
                  </p>
                  <span class="text-primary mt-4 text-sm font-medium">
                    Read Article →
                  </span>
                </a>
              ))}
            </div>
          </section>
        )}

        <ImpactMetricsSection metrics={metrics} />

        <div class="mx-auto max-w-4xl">
          <div
            class="glass rounded-2xl p-12 text-center delay-800 duration-500"
          >
            <h2 class="text-foreground mb-4 text-3xl font-bold md:text-4xl">
              Ready to Get Started?
            </h2>
            <p class="text-muted-foreground mb-8 text-xl">
              Let's discuss how {service.data.title.toLowerCase()} can transform
              your business.
            </p>
            <a
              href="/contact"
              class="bg-primary text-primary-foreground hover:bg-primary/90 inline-flex cursor-pointer items-center justify-center rounded-md px-8 py-3 text-sm font-medium shadow-sm transition-colors"
            >
              Contact Us Today
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>
