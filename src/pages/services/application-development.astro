---
import { getCollection, getEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation';
import { getNavigationData } from '@/lib/navigation-data';
import { iconMap } from '@/lib/icons';
import { ServiceCard, ServiceCardGrid } from '@/components/ServiceCard';
import ImpactMetricsSection from '@/components/ImpactMetricsSection.astro';
import CTASection from '@/components/CTASection';
import { Card } from '@/components/ui/card';
import {
  Code2,
  Network,
  RefreshCw,
  Target,
  Trophy,
  TrendingUp,
  Link,
  Maximize,
  ShieldCheck,
  Search,
  LayoutIcon,
  GitBranch,
  Rocket,
  Database,
  Cloud,
  Terminal,
  Shield,
  Lock,
  KeyRound,
  Eye,
  Award,
  Bell,
  Mail,
} from 'lucide-react';

const service = await getEntry('services', 'application-development');
if (!service) {
  return new Response(null, { status: 404 });
}
const { servicesData, recentPosts } = await getNavigationData();
const IconComponent = iconMap[service.data.icon];
const title = service.data.title;
const titleWords = title.split(' ');
const lastTitleWord = titleWords.pop();
const titleFirst = titleWords.join(' ');

const _serviceSchema = {
  '@context': 'https://schema.org',
  '@type': 'Service',
  name: service.data.title,
  description:
    'Custom business application development, modernization, and integration services delivered by BDKinc for growth-focused organizations.',
  provider: {
    '@type': 'Organization',
    name: 'BDKinc',
    url: 'https://www.bdkinc.com',
  },
  serviceType: 'Custom Application Development',
  areaServed: ['Mid-Atlantic', 'United States'],
};

const relatedTags = ['application-development', 'software-development', 'modernization'];
// Narrow the collection item data shape so TypeScript knows about optional fields
const relatedPosts = (await getCollection('blog'))
  .filter((post) => {
    const data = post.data as unknown as { tags?: string[]; draft?: boolean };
    // exclude drafts
    if (data.draft) return false;
    // ensure tags is an array then check for any matching tag
    return Array.isArray(data.tags) && data.tags.some((tag: string) => relatedTags.includes(tag));
  })
  .slice(0, 3);

const metrics = [
  { value: '250+', label: 'APPS DELIVERED', icon: Code2 },
  { value: '92%', label: 'CLIENT RETENTION', icon: Award },
  { value: '60+', label: 'SYSTEM INTEGRATIONS', icon: Link },
  { value: '45', label: 'ANNUAL RELEASES', icon: Rocket },
];
---

<Layout
  title={`${service.data.title} for Regulated & Growth Enterprises | BDKinc`}
  description="Custom application development, modernization, and systems integration that streamline complex workflows for regulated and growth-stage organizations across the Mid-Atlantic."
  ogDescription="Enterprise-grade custom application development and modernization from BDKinc, aligning critical workflows, integrations, and security requirements for growth-focused teams."
>
  <script type="application/ld+json" is:inline>
    {JSON.stringify(_serviceSchema)}
  </script>
  <Navigation
    client:load
    services={servicesData}
    blogPosts={recentPosts}
    currentPath={Astro.url.pathname}
  />
  <main id="main-content">
    <!-- Hero Section -->
    <section class="relative overflow-hidden px-4 pt-24 pb-12 sm:px-6 lg:px-8">
      <div class="gradient-mesh absolute inset-0 opacity-30"></div>
      <div class="circuit-overlay absolute inset-0 opacity-40"></div>
      <div class="relative z-10 mx-auto max-w-7xl">
        <div class="text-center">
          <div
            class="from-primary/10 to-secondary/10 mb-6 inline-flex items-center justify-center rounded-2xl bg-linear-to-br p-4 delay-100 duration-500"
            transition:name={`service-icon-${service.id}`}
          >
            <IconComponent className="text-primary h-12 w-12" aria-hidden="true" />
          </div>
          <h1
            class="mb-6 text-5xl font-bold md:text-6xl"
            transition:name={`service-title-${service.id}`}
            transition:animate="initial"
          >
            <span class="text-foreground"
              >{titleFirst ? `${titleFirst} ` : ''}</span
            >
            <span
              class="from-primary to-secondary bg-linear-to-br bg-clip-text text-transparent"
              >{lastTitleWord}</span
            >
          </h1>
          <p
            transition:name={`service-description-${service.id}`}
            transition:animate="initial"
            class="text-muted-foreground mx-auto max-w-3xl text-xl mb-12"
          >
            {service.data.description}
          </p>
        </div>

        {/* Hero Image Placeholder */}
        <div class="fill-mode-both animate-in fade-in zoom-in delay-300 duration-700">
          <div class="glass mx-auto max-w-5xl overflow-hidden rounded-2xl border border-primary/20 shadow-lg">
            <div class="bg-linear-to-br from-primary/5 via-secondary/5 to-primary/5 flex aspect-video items-center justify-center">
              <div class="text-center">
                <div class="text-muted-foreground/40 mb-2 text-sm font-medium uppercase tracking-wider">Service Hero Image</div>
                <div class="text-muted-foreground/60 text-lg">Application Development Illustration</div>
                <div class="text-muted-foreground/40 mt-2 text-xs">Recommended: 1400x800px</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="from-brand-primary to-brand-secondary absolute right-0 bottom-0 left-0 h-2 bg-linear-to-br"
      >
      </div>
    </section>

    <!-- Content Section -->
    <section class="px-4 py-24 sm:px-6 lg:px-8">
      <div
        class="animate-in fade-in slide-in-from-bottom-4 fill-mode-both space-y-12 delay-600 duration-700"
      >
        <div class="mx-auto max-w-7xl">
          <div
            class="animate-in fade-in slide-in-from-bottom-4 fill-mode-both space-y-12 delay-600 duration-700"
          >
            <div class="mx-auto max-w-7xl">
              <div class="service-content-wrapper">
                <div class="not-prose mx-auto max-w-4xl">
                  <h2
                    class="text-foreground mb-6 text-center text-3xl font-bold"
                  >
                    Custom Applications That Drive Business Success
                  </h2>
                  <div
                    class="text-muted-foreground mb-10 text-center text-lg leading-relaxed"
                  >
                    Enterprise-grade custom application development solutions
                    designed to solve your unique business challenges. We build
                    scalable, secure applications tailored to your specific
                    workflows, processes, and objectives.
                  </div>
                </div>

                <h3 class="text-foreground mb-6 text-center text-2xl font-bold">
                  Solutions Built for Your Business
                </h3>

                <ServiceCardGrid>
                  <ServiceCard>
                    <div class="mb-6">
                      <Code2 className="text-primary h-16 w-16" aria-hidden="true" />
                    </div>
                    <h4 class="text-foreground mb-4 text-2xl font-bold">
                      Custom Business Applications
                    </h4>
                    <div class="text-foreground leading-relaxed">
                      Off-the-shelf software forces you to adapt your processes
                      to someone else's vision. Our custom applications are
                      built around how your business actually works—automating
                      workflows, integrating systems, and solving problems
                      specific to your industry and operations.
                    </div>
                  </ServiceCard>

                  <ServiceCard>
                    <div class="mb-6">
                      <Network className="text-primary h-16 w-16" aria-hidden="true" />
                    </div>
                    <h4 class="text-foreground mb-4 text-2xl font-bold">
                      Enterprise Integration
                    </h4>
                    <div class="text-foreground leading-relaxed">
                      Connect your existing systems into a unified ecosystem. We
                      build integration solutions that bridge gaps between
                      legacy systems, cloud services, databases, and third-party
                      APIs—creating seamless data flow across your organization.
                    </div>
                  </ServiceCard>

                  <ServiceCard>
                    <div class="mb-6">
                      <RefreshCw className="text-primary h-16 w-16" aria-hidden="true" />
                    </div>
                    <h4 class="text-foreground mb-4 text-2xl font-bold">
                      Application Modernization
                    </h4>
                    <div class="text-foreground leading-relaxed">
                      Transform outdated legacy applications into modern,
                      cloud-ready solutions. We help you preserve valuable
                      business logic while updating technology stacks, improving
                      performance, and adding new capabilities.
                    </div>
                  </ServiceCard>
                </ServiceCardGrid>

                <h3
                  class="text-foreground mt-12 mb-6 text-center text-2xl font-bold"
                >
                  Key Benefits
                </h3>

            <div class="not-prose mb-20 grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                <Card size="default" interactive={false} className="flex flex-col items-center text-center">
                  <div class="mb-4">
                    <Target className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Tailored Solutions
                  </h4>
                  <div class="text-muted-foreground">
                    Applications designed specifically for your business
                    processes
                  </div>
                </Card>

                <Card size="default" interactive={false} className="flex flex-col items-center text-center">
                  <div class="mb-4">
                    <Trophy className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Competitive Advantage
                  </h4>
                  <div class="text-muted-foreground">
                    Custom features that differentiate you from competitors
                  </div>
                </Card>

                <Card size="default" interactive={false} className="flex flex-col items-center text-center">
                  <div class="mb-4">
                    <TrendingUp className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Increased Efficiency
                  </h4>
                  <div class="text-muted-foreground">
                    Automation reduces manual work and human error
                  </div>
                </Card>

                <Card size="default" interactive={false} className="flex flex-col items-center text-center">
                  <div class="mb-4">
                    <Link className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Better Integration
                  </h4>
                  <div class="text-muted-foreground">
                    Seamless connectivity between all your business systems
                  </div>
                </Card>

                <Card size="default" interactive={false} className="flex flex-col items-center text-center">
                  <div class="mb-4">
                    <Maximize className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Scalability
                  </h4>
                  <div class="text-muted-foreground">
                    Applications that grow with your business needs
                  </div>
                </Card>

                <Card size="default" interactive={false} className="flex flex-col items-center text-center">
                  <div class="mb-4">
                    <ShieldCheck className="text-primary h-10 w-10" aria-hidden="true" />
                  </div>
                  <h4 class="text-foreground mb-2 text-xl font-bold">
                    Data Ownership
                  </h4>
                  <div class="text-muted-foreground">
                    Full control over your applications and data
                  </div>
                </Card>
              </div>

                <h3 class="text-foreground mb-6 text-center text-2xl font-bold">
                  Technology Stack
                </h3>

                <div class="not-prose mb-20 grid gap-8 md:grid-cols-2">
                  <div class="glass border-border rounded-2xl border p-8">
                    <div class="mb-6 flex items-center gap-3">
                      <Terminal className="text-primary h-8 w-8" aria-hidden="true" />
                      <h4 class="text-foreground text-2xl font-bold">
                        Technology Expertise
                      </h4>
                    </div>
                    <div class="text-muted-foreground space-y-3">
                      <div class="flex items-start gap-2">
                        <Database
                          className="text-primary mt-1 h-5 w-5 shrink-0"
                          aria-hidden="true"
                        />
                        <span
                          ><strong class="text-foreground">.NET & C#:</strong> Enterprise
                          applications and services</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <Code2 className="text-primary mt-1 h-5 w-5 shrink-0" aria-hidden="true" />
                        <span
                          ><strong class="text-foreground"
                            >JavaScript/TypeScript:</strong
                          > React, Node.js, modern web frameworks</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <Search
                          className="text-primary mt-1 h-5 w-5 shrink-0"
                          aria-hidden="true"
                        />
                        <span
                          ><strong class="text-foreground">Python:</strong> Data
                          processing, automation, machine learning</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <LayoutIcon
                          className="text-primary mt-1 h-5 w-5 shrink-0"
                          aria-hidden="true"
                        />
                        <span
                          ><strong class="text-foreground">SQL & NoSQL:</strong>
                          Database design and optimization</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <Cloud className="text-primary mt-1 h-5 w-5 shrink-0" aria-hidden="true" />
                        <span
                          ><strong class="text-foreground"
                            >Cloud Platforms:</strong
                          > AWS, Azure, Google Cloud</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <GitBranch
                          className="text-primary mt-1 h-5 w-5 shrink-0"
                          aria-hidden="true"
                        />
                        <span
                          ><strong class="text-foreground">DevOps:</strong> CI/CD,
                          containerization, infrastructure as code</span
                        >
                      </div>
                    </div>
                  </div>

                  <div class="glass border-border rounded-2xl border p-8">
                    <div class="mb-6 flex items-center gap-3">
                      <Shield className="text-primary h-8 w-8" aria-hidden="true" />
                      <h4 class="text-foreground text-2xl font-bold">
                        Application Security
                      </h4>
                    </div>
                    <div class="text-muted-foreground space-y-3">
                      <div class="flex items-start gap-2">
                        <Lock className="text-primary mt-1 h-5 w-5 shrink-0" aria-hidden="true" />
                        <span
                          ><strong class="text-foreground"
                            >Secure Coding:</strong
                          > Practices and code reviews</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <KeyRound
                          className="text-primary mt-1 h-5 w-5 shrink-0"
                          aria-hidden="true"
                        />
                        <span
                          ><strong class="text-foreground"
                            >Authentication:</strong
                          > Authorization frameworks</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <Eye className="text-primary mt-1 h-5 w-5 shrink-0" aria-hidden="true" />
                        <span
                          ><strong class="text-foreground">Encryption:</strong> Data
                          at rest and in transit</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <Bell className="text-primary mt-1 h-5 w-5 shrink-0" aria-hidden="true" />
                        <span
                          ><strong class="text-foreground"
                            >Security Testing:</strong
                          > Vulnerability scanning</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <Award className="text-primary mt-1 h-5 w-5 shrink-0" aria-hidden="true" />
                        <span
                          ><strong class="text-foreground">Compliance:</strong> HIPAA,
                          PCI-DSS, SOC 2 standards</span
                        >
                      </div>
                      <div class="flex items-start gap-2">
                        <Rocket
                          className="text-primary mt-1 h-5 w-5 shrink-0"
                          aria-hidden="true"
                        />
                        <span
                          ><strong class="text-foreground">Monitoring:</strong> Security
                          monitoring and response</span
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <h3 class="text-foreground mb-6 text-center text-2xl font-bold">
                  Why Choose BDK for Custom Development?
                </h3>

                <div class="text-center">
                  <div
                    class="text-muted-foreground mx-auto mb-6 max-w-4xl text-lg leading-relaxed"
                  >
                    We bring decades of experience building mission-critical
                    business applications. Our team understands both technology
                    and business—we speak your language and translate business
                    requirements into elegant technical solutions.
                  </div>
                  <div class="mt-8 grid gap-6 md:grid-cols-3">
                    <div>
                      <h5 class="text-primary mb-2 text-lg font-bold">
                        Enterprise Experience
                      </h5>
                      <div class="text-muted-foreground text-sm">
                        Built applications for IBM Power systems, integrated
                        with complex ERP platforms, and developed solutions that
                        handle millions of transactions
                      </div>
                    </div>
                    <div>
                      <h5 class="text-primary mb-2 text-lg font-bold">
                        Full-Stack Capability
                      </h5>
                      <div class="text-muted-foreground text-sm">
                        From database design to user interfaces, APIs to DevOps,
                        we handle every aspect of application development
                      </div>
                    </div>
                    <div>
                      <h5 class="text-primary mb-2 text-lg font-bold">
                        Long-Term Partnership
                      </h5>
                      <div class="text-muted-foreground text-sm">
                        We build relationships, not just software. Many of our
                        clients have been with us for years as we continue to
                        evolve their applications
                      </div>
                    </div>
                  </div>
                  <div class="text-primary mt-8 text-xl font-semibold">
                    Let us help you build the custom applications your business
                    needs to compete and grow.
                  </div>
                </div>
              </div>
            </div>

            {relatedPosts.length > 0 && (
              <section class="mx-auto max-w-5xl">
                <h2 class="text-foreground mb-6 text-center text-3xl font-bold">
                  Related Resources
                </h2>
                <div class="grid gap-6 md:grid-cols-3">
                  {relatedPosts.map((post) => (
                    <a
                      href={`/blog/${post.slug}`}
                      class="border-border hover:border-primary flex flex-col rounded-xl border p-6 transition-colors"
                    >
                      <h3 class="text-foreground mb-2 text-lg font-semibold">
                        {post.data.title}
                      </h3>
                      <p class="text-muted-foreground text-sm">
                        {post.data.description}
                      </p>
                      <span class="text-primary mt-4 text-sm font-medium">
                        Read Article →
                      </span>
                    </a>
                  ))}
                </div>
              </section>
            )}

            <ImpactMetricsSection metrics={metrics} />

            <CTASection
              client:visible
              title="Ready to Transform Your IT?"
              description={`Let's discuss how ${service.data.title.toLowerCase()} can help your business thrive with reliable, scalable technology solutions.`}
              buttonText="Get in Touch"
              buttonHref="/contact?from=application-development"
            />
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>
