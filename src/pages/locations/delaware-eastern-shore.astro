---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation';
import { getNavigationData } from '@/lib/navigation-data';
import { getCollection } from 'astro:content';
import { iconMap } from '@/lib/icons';
import {
  MapPin,
  Users,
  Server,
  Shield,
  Phone,
  Mail,
  TrendingUp,
  Clock,
  CheckCircle,
} from 'lucide-react';
import { Card } from '@/components/ui/card';

const { servicesData, recentPosts } = await getNavigationData();

// Get all services for the location pages
const services = await getCollection('services');
const locations = await getCollection('locations');
const sortedServices = services.sort((a, b) => a.data.order - b.data.order);

// Delaware Eastern Shore locations only (Kent and Sussex counties)
const delawareLocations = locations.filter(
  (loc) => loc.data.state === 'Delaware'
);
const delawareServicesPages = [];

// Generate service + location combinations for Delaware
for (const service of sortedServices) {
  for (const location of delawareLocations) {
    const locationSlug = location.data.name
      .toLowerCase()
      .replace(/\s+/g, '-')
      .replace(/,/g, '');

    delawareServicesPages.push({
      serviceSlug: service.id,
      serviceName: service.data.title,
      locationName: location.data.name,
      locationState: location.data.state,
      url: `/services/${service.id}/${locationSlug}`,
      icon: service.data.icon,
    });
  }
}
---

<Layout
  title="Delaware Eastern Shore IT Services | Managed IT Services | BDK Inc"
  description="Complete managed IT services and cloud solutions for Delaware Eastern Shore businesses. Local MSP serving Dover, Milford, Georgetown, Lewes, Rehoboth Beach and surrounding areas."
>
  <Navigation
    client:load
    services={servicesData}
    blogPosts={recentPosts}
    currentPath={Astro.url.pathname}
  />
  <main id="main-content">
    <!-- Hero Section -->
    <section class="relative overflow-hidden px-4 pt-24 pb-12 sm:px-6 lg:px-8">
      <div class="gradient-mesh absolute inset-0 opacity-30"></div>
      <div class="circuit-overlay absolute inset-0 opacity-40"></div>
      <div class="relative z-10 mx-auto max-w-7xl text-center">
        <div class="mb-6 inline-flex items-center justify-center gap-2 text-lg">
          <MapPin className="text-primary h-5 w-5" />
          <span class="text-muted-foreground">Delaware Eastern Shore</span>
        </div>
        <h1 class="mb-6 text-5xl font-bold md:text-6xl">
          <span class="text-foreground">IT Services for </span>
          <span class="text-primary">Delaware Eastern Shore</span>
        </h1>
        <p class="text-muted-foreground mx-auto max-w-3xl text-xl">
          Trusted managed IT services provider serving businesses across
          Delaware's Eastern Shore. From Dover to Rehoboth Beach, we deliver
          proactive technology support and strategic IT solutions tailored for
          local businesses.
        </p>
      </div>
      <div
        class="mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row"
      >
        <a
          href="/contact"
          class="bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center gap-2 rounded-md px-8 py-3 text-sm font-medium shadow-sm transition-colors duration-300 hover:shadow-[--shadow-glow-sm]"
        >
          <Phone className="h-4 w-4" />
          Get Started Today
        </a>
        <a
          href="tel:800-309-0004"
          class="text-muted-foreground hover:text-foreground inline-flex items-center gap-2 text-sm transition-colors"
        >
          <Phone className="h-4 w-4" />
          (800) 309-0004
        </a>
      </div>
      <div
        class="from-brand-primary to-brand-secondary absolute right-0 bottom-0 left-0 h-2 bg-linear-to-br"
      >
      </div>
    </section>

    <!-- Featured Cities -->
    <section class="px-4 py-16 sm:px-6 lg:px-8">
      <div class="mx-auto max-w-7xl">
        <h2
          class="text-foreground mb-12 text-center text-3xl font-bold md:text-4xl"
        >
          Serving Delaware Eastern Shore Communities
        </h2>
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {
            delawareLocations.slice(0, 6).map((location, index) => (
              <Card key={index} className="text-center p-6">
                <MapPin className="text-primary mx-auto mb-3 h-6 w-6" />
                <h3 class="text-foreground font-semibold">
                  {location.data.name}
                </h3>
                <p class="text-muted-foreground text-sm">
                  {location.data.counties?.join(' County')}
                </p>
                <a
                  href={`/services/managed-it/${location.data.name.toLowerCase().replace(/\s+/g, '-')}`}
                  class="text-primary hover:text-primary/80 mt-3 text-sm font-medium"
                >
                  View IT Services →
                </a>
              </Card>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Services by Location -->
    <section class="bg-muted/50 px-4 py-16 sm:px-6 lg:px-8">
      <div class="mx-auto max-w-7xl">
        <h2
          class="text-foreground mb-12 text-center text-3xl font-bold md:text-4xl"
        >
          Services by Location
        </h2>
        <div class="grid grid-cols-1 gap-8 lg:grid-cols-2">
          <div>
            <h3 class="text-foreground mb-6 text-2xl font-semibold">
              Managed IT Services
            </h3>
            <div class="space-y-4">
              <div class="flex items-start gap-3">
                <Server className="text-primary mt-1 h-5 w-5 shrink-0" />
                <p class="text-muted-foreground">
                  24/7 monitoring and proactive maintenance
                </p>
              </div>
              <div class="flex items-start gap-3">
                <Shield className="text-primary mt-1 h-5 w-5 shrink-0" />
                <p class="text-muted-foreground">
                  Cybersecurity protection and compliance
                </p>
              </div>
              <div class="flex items-start gap-3">
                <Clock className="text-primary mt-1 h-5 w-5 shrink-0" />
                <p class="text-muted-foreground">
                  Fast response times across Kent and Sussex counties
                </p>
              </div>
            </div>
          </div>

          <div>
            <h3 class="text-foreground mb-6 text-2xl font-semibold">
              Delaware Focus Areas
            </h3>
            <div class="space-y-4">
              <div class="flex items-start gap-3">
                <CheckCircle className="text-primary mt-1 h-5 w-5 shrink-0" />
                <p class="text-muted-foreground">
                  Local expertise with Delaware business regulations
                </p>
              </div>
              <div class="flex items-start gap-3">
                <TrendingUp className="text-primary mt-1 h-5 w-5 shrink-0" />
                <p class="text-muted-foreground">
                  Scalable solutions for growing coastal businesses
                </p>
              </div>
              <div class="flex items-start gap-3">
                <Users className="text-primary mt-1 h-5 w-5 shrink-0" />
                <p class="text-muted-foreground">
                  Dedicated support team familiar with your communities
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Service Location Grid -->
    <section class="px-4 py-16 sm:px-6 lg:px-8">
      <div class="mx-auto max-w-7xl">
        <h2
          class="text-foreground mb-12 text-center text-3xl font-bold md:text-4xl"
        >
          Find Your Service + Location
        </h2>
        <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
          {
            sortedServices.slice(0, 3).map((service) => {
              const IconComponent = iconMap[service.data.icon];
              return (
                <Card key={service.id} className="p-6">
                  <div class="text-center">
                    <div class="bg-primary/5 mb-4 inline-flex items-center justify-center rounded-lg p-3">
                      <IconComponent className="text-primary h-8 w-8" />
                    </div>
                    <h3 class="text-foreground mb-4 text-xl font-bold">
                      {service.data.title}
                    </h3>
                    <p class="text-muted-foreground mb-6 text-sm">
                      {service.data.description}
                    </p>
                    <div class="space-y-2">
                      {delawareLocations.slice(0, 4).map((location) => (
                        <a
                          href={`/services/${service.id}/${location.data.name.toLowerCase().replace(/\s+/g, '-')}`}
                          class="text-muted-foreground hover:text-primary hover:bg-muted/50 flex items-center justify-between rounded px-3 py-2 text-sm"
                        >
                          <span>
                            {location.data.name}, {location.data.state}
                          </span>
                          <span class="text-primary">→</span>
                        </a>
                      ))}
                    </div>
                  </div>
                </Card>
              );
            })
          }
        </div>
      </div>
    </section>

    <!-- All Locations -->
    <section class="bg-muted/50 px-4 py-16 sm:px-6 lg:px-8">
      <div class="mx-auto max-w-7xl">
        <h2
          class="text-foreground mb-12 text-center text-3xl font-bold md:text-4xl"
        >
          All Delaware Eastern Shore Locations
        </h2>
        <div
          class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6"
        >
          {
            delawareLocations.map((location, index) => (
              <a
                href={`/services/managed-it/${location.data.name.toLowerCase().replace(/\s+/g, '-')}`}
                class="hover:bg-muted/50 rounded p-3 text-center transition-colors"
              >
                <MapPin className="text-primary mx-auto mb-2 h-4 w-4" />
                <div class="text-foreground text-sm font-medium">
                  {location.data.name}
                </div>
                <div class="text-muted-foreground text-xs">
                  {location.data.state}
                </div>
              </a>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Beach Communities Special Section -->
    <section class="px-4 py-16 sm:px-6 lg:px-8">
      <div class="mx-auto max-w-7xl">
        <h2
          class="text-foreground mb-12 text-center text-3xl font-bold md:text-4xl"
        >
          Coastal Community Expertise
        </h2>
        <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
          <Card className="p-6">
            <h3 class="text-foreground mb-4 text-xl font-semibold">
              Tourism Industry Support
            </h3>
            <p class="text-muted-foreground mb-4">
              Specialized IT solutions for hotels, restaurants, and seasonal
              businesses in Rehoboth Beach, Bethany Beach, and Lewes.
            </p>
            <a
              href="/services/managed-it/rehoboth-beach"
              class="text-primary font-medium">Learn More →</a
            >
          </Card>

          <Card className="p-6">
            <h3 class="text-foreground mb-4 text-xl font-semibold">
              Healthcare & Medical
            </h3>
            <p class="text-muted-foreground mb-4">
              HIPAA-compliant IT solutions for medical practices, clinics, and
              healthcare facilities throughout Delaware's Eastern Shore.
            </p>
            <a
              href="/services/cybersecurity/dover"
              class="text-primary font-medium">Learn More →</a
            >
          </Card>

          <Card className="p-6">
            <h3 class="text-foreground mb-4 text-xl font-semibold">
              Agriculture & Agribusiness
            </h3>
            <p class="text-muted-foreground mb-4">
              Technology support for Delaware's agricultural industry, from farm
              management systems to supply chain IT solutions.
            </p>
            <a
              href="/services/cloud-hosting/georgetown"
              class="text-primary font-medium">Learn More →</a
            >
          </Card>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="px-4 py-16 sm:px-6 lg:px-8">
      <div class="mx-auto max-w-4xl">
        <Card className="text-center" size="xl" interactive={false}>
          <h2 class="text-foreground mb-4 text-3xl font-bold md:text-4xl">
            Ready for Better IT Support in Delaware?
          </h2>
          <p class="text-muted-foreground mb-8 text-xl">
            Discover how BDK Inc can transform your technology infrastructure
            with local Eastern Shore expertise and proven IT solutions.
          </p>
          <div
            class="flex flex-col items-center justify-center gap-4 sm:flex-row"
          >
            <a
              href="/contact"
              class="bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center gap-2 rounded-md px-8 py-3 text-sm font-medium shadow-sm transition-colors duration-300 hover:shadow-[--shadow-glow-sm]"
            >
              <Mail className="h-4 w-4" />
              Schedule Consultation
            </a>
            <a
              href="tel:800-309-0004"
              class="text-muted-foreground hover:text-foreground inline-flex items-center gap-2 text-sm font-medium transition-colors"
            >
              <Phone className="h-4 w-4" />
              Call (800) 309-0004
            </a>
          </div>
        </Card>
      </div>
    </section>
  </main>
</Layout>
